## Задание 4

Попытка скомпиллировать всю информацию, известную по заданию 4.
> [!WARNING]
> Вся информация здесь не претендует на достоверность и может быть
> ошибочной

### Общее описание задач

Необходимо выполнить следующие задачи:

- Найти партнёра в свою команду и вместе создать на [яндекс трекере](https://tracker.yandex.ru) компанию
- На основе калькулятора, написанного для прошлого задания, написать веб-сервер на питоне
- Организовать разбиение задачи написания сервера на подзадачи в трекере и оформлять пошагово то, что мы делаем


### 1. Работа в команде

Для выполнения задания необходимо найти себе партнёра, с которым вы будете совместно работать. Нужно решить, кто из вас будет отвечать за планирование, приёмку и архитектурные решения, а кто будет исполнителем, пишущим непосредственно код.

****
**В обязанности планировщика входит:**

- Продумывание общей структуры проекта
- Разбиение его на поздадачи: к примеру, не "напиши-ка мне сервер. быстро", а 
  1. реализуй интеграцию программы на C и кода на питоне 
  2. реализуй базовую обработку POST запросов(на уровне "пришёл пост запрос -- print("cool")") 
  3. реализуй парсинг тела запроса
  4. и т.д.
- Фиксирование задач в трекере. **важно:** нейминг задач имеет вид ```<ключ яндекс трекера>-<номер задачи>```, к примеру для ключа ip: ip-1(для первой), ip-2(для второй) и т.д.
- Контроль за своим партнёром
- Вопросы, комментарии и прочее, чтобы исполнитель наиболее точно реализовал задуманное
- Написание интеграционных тестов (не до конца понял, возможно опционально)
- Ведение учёта активности исполнителя в ридми-файле(в формате "дата: что сделано за день")
****
**В обязанности исполнителя входит:**

- Выполнение задач, поставленных перед ним планировщиком
- Отчёт перед планировщиком о проделанной работе
- Тестирование по мере необходимости (не стоит перегружать всё unit-тестами, они не требуются, но если надо -- можно написать)
****
**Общее важное:** в коммитах сообщения отныне имеют вид ```<ключ яндекс трекера>-<номер задачи>```: текст коммита". Ключ создаётся в момент создания группы в трекере. К примеру для ключа ip:
```bash
...
git commit -S -m "ip-3: реализована интеграция сервера с калькулятором"
...
git commit -S -m "ip-3: исправлен баг при котором программа призывала бесов"
...
git commit -S -m "ip-4: налажена базовая обработка POST-запросов"
```
> [!NOTE]
> К одной задаче могут (и, вероятно, будут относиться несколько коммитов)

### 2. Написание сервера

При написании сервера нужно использовать ЯП Python. При этом нельзя использовать сторонние библиотеки, кроме [strucktlog](https://www.structlog.org/en/stable/getting-started.html)
Для написания сервера целесообразно использовать [http.server](https://docs.python.org/3/library/http.server.html) из стандартной библиотеки питона
****
#### Требования к серверу
Описаны в openapi схеме [тута](./useful_crap/openapi3_1.yaml).

- Должен обрабатываться POST-запрос по пути ```/calc```. То есть, если ваш сервер запущен на ```localhost:8000```, то при обращении к нему по адресу ```http://localhost:8000/calc``` мы делаем штуки.
- Этот запрос имеет следующий вид:

  - Опционально может иметь [query-параметр](https://en.wikipedia.org/wiki/Query_string) ```float```, принимающий булевое значение (по умолчанию ```false```, то есть по умолчанию вычисления с целочисленным делением). Итого, url запроса может иметь вид (первые 2 -- целочисленное деление, третий -- дробное):

    - ```http://localhost:8000/calc```
    - ```http://localhost:8000/calc?float=false```
    - ```http://localhost:8000/calc?float=true```
  - Тело запроса обязательно и отвечает таким требованиям:

    - ```Content-Type: application/json```
    - Тело запроса представляется простой строкой, содержащей выражение, которое необходимо вычислить
    - Примеры: ```1 + 2```, ```3 * (4 + 5)```

- Ответ за этот запрос сервер пишет следующим образом:

  - В случае успеха вычисления [код состояния](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP) ответа равен 200. Тело ответа всё также имеет тип контента ```application/json``` и содержит просто ответ, выданный калькулятором
  - В случае критической ошибки внутри сервера отвечаем пользователю с кодом состояния 500
  - В случае некритической ошибки (калькулятор на С остановился и выдал какой-то ответ, но, например, указал, что входные данные некорректны) в схеме не указано, что делать, так что возможно отправлять код состояния 500 также

#### Как тестировать сервер?

Есть программа [postman](https://www.postman.com/), которая даже может быть установлена в качестве расширения в VSCode. Позволяет отправлять запросы, получать ответы и в целом удобный инструмент.

Если любите острые ощущения, то есть ещё [CURL](https://devqa.io/curl-sending-api-requests/).

### По поводу разбиения задач

Каких-то явных требований по тому пункту не было, но тут стоит руководствоваться логикой. Понятно, что наш сервер и калькулятор -- довольно игрушечный пример, который в целом и так довольно понятно исполнителю, как делать, но можно представить, что это что-то комплексное и постараться максимально разбить на составные части. Мне видится, что минимум 4-5 задач выделить легко. Но кому-то может и 3 хватить. Опять же, чёткой границы или треббования нет.
